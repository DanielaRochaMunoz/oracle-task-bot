#!/bin/bash

# Directorio actual
WORKDIR=$(pwd)

# URL a analizar (puedes cambiarla por la de tu proyecto real)
TARGET_URL="http://140.84.167.112/"

# Nombre del archivo de salida
OUTPUT_FILE="result.xml"

echo "üèÅ Iniciando escaneo con OWASP ZAP para: $TARGET_URL"
echo "üìÇ Guardando resultados en: $WORKDIR/$OUTPUT_FILE"

# Ejecuta el contenedor de ZAP en modo quick scan
docker run -v "$WORKDIR:/zap/wrk" -u root -t zaproxy/zap-stable zap.sh \
  -cmd -quickurl "$TARGET_URL" -quickout "/zap/wrk/$OUTPUT_FILE"

echo "‚úÖ Escaneo finalizado. Revisa el archivo result.xml generado en tu carpeta local."
